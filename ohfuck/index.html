



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://pages.charlesreid1.com/git-commit-ectomy/ohfuck/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.2">
    
    
      
        <title>Oh Fuck: Send Reinforcements - git-commit-ectomy</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="orange" data-md-color-accent="orange">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#oh-fuck-please-send-backup" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://pages.charlesreid1.com/git-commit-ectomy/" title="git-commit-ectomy" class="md-header-nav__button md-logo">
          
            <i class="md-icon">announcement</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                git-commit-ectomy
              </span>
              <span class="md-header-nav__topic">
                Oh Fuck: Send Reinforcements
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://git.charlesreid1.com/charlesreid1/git-commit-ectomy" title="Go to repository" class="md-source" data-md-source="">
    
    <div class="md-source__repository">
      charlesreid1/git-commit-ectomy
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon">announcement</i>
      
    </span>
    git-commit-ectomy
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://git.charlesreid1.com/charlesreid1/git-commit-ectomy" title="Go to repository" class="md-source" data-md-source="">
    
    <div class="md-source__repository">
      charlesreid1/git-commit-ectomy
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Index" class="md-nav__link">
      Index
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../easy/" title="Git-Commit-Ectomy the Easy Way: Single Branch" class="md-nav__link">
      Git-Commit-Ectomy the Easy Way: Single Branch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../branches/" title="Complications: Dealing with Branches" class="md-nav__link">
      Complications: Dealing with Branches
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cherrypicking/" title="Git-Commit-Ectomy the Hard Way: Cherry Picking" class="md-nav__link">
      Git-Commit-Ectomy the Hard Way: Cherry Picking
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Oh Fuck: Send Reinforcements
      </label>
    
    <a href="./" title="Oh Fuck: Send Reinforcements" class="md-nav__link md-nav__link--active">
      Oh Fuck: Send Reinforcements
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-first-case" title="the first case" class="md-nav__link">
    the first case
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-second-case" title="the second case" class="md-nav__link">
    the second case
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-third-case" title="the third case" class="md-nav__link">
    the third case
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-first-case" title="the first case" class="md-nav__link">
    the first case
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-second-case" title="the second case" class="md-nav__link">
    the second case
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-third-case" title="the third case" class="md-nav__link">
    the third case
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="oh-fuck-please-send-backup">Oh Fuck: Please Send Backup</h1>
<p>Pretty much what happened to me,
when I used the single-branch procedure
instead of the multi-branch procedure.</p>
<p>Possible complications to all of this 
include:</p>
<ul>
<li>
<p>Clueless individuals who do not
    follow basic instructions and continue to push
    old versions of the repo, which can be proactively
    addressed by branch protection but sometimes
    must also be retroactively dealt with; </p>
</li>
<li>
<p>Accidentally carrying out the procedure multiple times,
    resulting in 2, 3, 4, even 5 copies of each commit,
    and the duplicate commits simply refuse to die</p>
</li>
<li>
<p>A confusing, tangled, messy commit history that is
    completely uninterpretable</p>
</li>
</ul>
<h3 id="the-first-case">the first case</h3>
<p>In the first case, start by turning on branch protection,
then clone a fresh copy of the repository (complete with
all the duplicate commits)</p>
<h3 id="the-second-case">the second case</h3>
<p>In the second case, find the branch you want to keep,
then rebase or cherry pick any missing commits onto it.
Now remove all the other branches. If these remote branches
are not being removed, make sure you have your syntax right,
and make sure you're using the <code>--force</code> command.</p>
<pre><code>git push remote_name :branch_to_delete
</code></pre>

<p>For example, if I want to delete the branch
<code>master</code> because I am creating a branch <code>new_master</code>
with improved/cleaned history,
I would do the following:</p>
<pre><code>git checkout &lt;hash-of-commit-to-split-at&gt;   # starting point for new branch
git branch new_master                       # create new branch
git checkout new_master                     # switch to new branch

...make some commits...
...rebase some stuff...
...cherry pick some stuff...
...now new branch has a long and totally different 
    commit history from master...

git push origin new_master                  # push all the new stuff to remote &quot;origin&quot;

git branch -D master                        # delete git branch master
git push origin :master                     # propagate deletion of branch &quot;master&quot; to remote &quot;origin&quot;
</code></pre>

<h3 id="the-third-case">the third case</h3>
<p>If you have an absolute clusterfuck of a commit history,
you need a gifted surgeon. The more gifted the surgeon,
the more of your repo history you'll be able to retain.</p>
<p>If you want to perform surgery with a battle axe, 
you can simply leapfrog a whole series of complicated
splits, merges, rebases, and just jump to a point in 
the repo where things are saner and calmer.</p>
<p>Clone a fresh copy of the repo, and checkout the 
commit where the clusterfuck is over, when things
are saner and calmer:</p>
<pre><code>git checkout &lt;commit-hash&gt;
</code></pre>

<p>Now, you're going to copy every single file
in that folder into your current (cluster-fucked)
repo, exactly, word for word, character for character.</p>
<p>If you have extra files, those are okay. If you have 
deleted files that are in the saner, calmer commit state,
you must add them back in.</p>
<p>Once everything matches, commit your changes.
Tag this commit as your "Stargate" - this is the 
commit that will allow you to rebase from 
one branch to the other. The repo will be in
exactly the same state (with exception of extra files)
between these two commits, so changes to one commit
can be applied to the other just fine.</p>
<p>Note that you will lose all information about commits 
that are not rebased or cherry picked, i.e., all the 
commits that were involved with the clusterfuck.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../cherrypicking/" title="Git-Commit-Ectomy the Hard Way: Cherry Picking" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Git-Commit-Ectomy the Hard Way: Cherry Picking
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="https://charlesreid1.com">Charles Reid</a>, released under the <a href="https://opensource.org/licenses/BSD-3-Clause">BSD 3-clause license</a>
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.0cf9b500.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
        <script src="../search/require.js"></script>
      
        <script src="../search/search.js"></script>
      
    
    
      
    
  </body>
</html>